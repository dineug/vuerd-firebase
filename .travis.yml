language: node_js
node_js:
  - lts/*

deploy:
  provider: firebase
  project: $PROJECT_ID
  token:
    secure: $FIREBASE_TOKEN
  skip_cleanup: true

before_install:
  - npm i -g firebase-tools

script:
  - yarn lint
  - yarn build
  - cd functions
  - npm i
  - cd ..
